
//volume0
A]G=p*:
H=G*3/4
#=0<N
I=0#1-1/p
J=1#1/:
C=0
#=X<2
C=C#p+1
#=p-3<X
C=C#p+4
#=Y<2
C=C#p+1
#=Z<2
C=C#p+1
#=p-3<Z
C=C#p+1
#=p-3<Y
C=C#p+1
#=p-4<X
A=2*:+5<Y;#=#*A
A=Y<4*:+4;#=#*A
A=Z<2*:+4;#=#*A
C=C#p+6
#=p-:+3<X
A=X<p-:+1
A=#*A
#=4*:<Z
#=#*A
C=C#p+3
#=Z<3*:+7
#=#*A
C=C#p+3
x=X-p/2
z=Z-4*:+8
#=z
t=2:x
y=4:Y/:*2
y=Y-y*:*2+:
t=y-t*:
r=3:x*x+z*z
r=r-:
r=3:t*t+r*r
#=r<1
C=C#p+3
#=0-z
t=2:0-x
t=y-t*:
r=3:x*x+z*z
r=r-:
r=3:t*t+r*r
#=r<1
C=C#p+2
R=0

//UVWXYZ
//ABCDEF
a]X=5:5
Y=5:5
X=X-1/2
Y=Y-1/2
X=X*G
Y=Y*H
Z=H/2
d=:+4
d=d*p/Z
X=X*d
Y=Y*d
Z=Z*d
U=p*p/2
V=p*p/2+p*4
W=p*3+p*:
A=0;B=0;C=0
D=1;E=1;F=1
R=0

//cbox
1]#=S<0
m=3#2
#=T
R=m#4

//red
2]R=5
E=E/3
F=F/3

//blue
3]R=5
D=D/3
E=E/3

//grey
4]R=5
D=D*8/9
E=E*8/9
F=F*8/9

//diffuse ray generation
5]R=0
a=5:5
b=5:5
b=b*2
r=3:a
z=1:b
y=1:1/2+b
z=z*r
y=y*r
x=3:1-a
x=0-x*S
X=6:T
w=x;x=z;z=y;y=w
Y=6:T
w=x;x=z;z=y;y=w
Z=6:T

//light
6]R=0
A=A+D*p*:/3
B=B+E*p*:/3
C=C+F*p*:/3
P=9

]]otherroom.ppm